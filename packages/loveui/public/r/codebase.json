{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "codebase",
  "description": "A codebase explorer block.",
  "registryDependencies": [],
  "files": [
    {
      "path": "registry/default/examples/codebase.tsx",
      "content": "\"use client\"\n\nimport { useState } from \"react\"\nimport { FileJson, FileText, FileType } from \"lucide-react\"\n\nimport {\n  CodeBlock,\n  CodeBlockContent,\n  CodeBlockGroup,\n  CodeBlockHeader,\n  CodeBlockIcon,\n  CodeblockShiki,\n  CopyButton,\n  type Languages,\n} from \"../../../../../packages/code-block/src\"\nimport {\n  TreeExpander,\n  TreeIcon,\n  TreeLabel,\n  TreeNode,\n  TreeNodeContent,\n  TreeNodeTrigger,\n  TreeProvider,\n  TreeView,\n} from \"../../../../../packages/tree\"\n\ntype FileContent = {\n  name: string\n  language: Languages\n  code: string\n}\n\nconst fileContents: Record<string, FileContent> = {\n  \"server.ts\": {\n    name: \"server.ts\",\n    language: \"ts\",\n    code: `import express from 'express';\nimport { taskRouter } from './routes/tasks';\nimport { userRouter } from './routes/users';\nimport { errorHandler } from './middleware/errorHandler';\nimport { logger } from './middleware/logger';\nimport { config } from './config';\n\nconst app = express();\n\n// Middleware\napp.use(express.json());\napp.use(logger);\n\n// Routes\napp.use('/api/tasks', taskRouter);\napp.use('/api/users', userRouter);\n\n// Health check\napp.get('/health', (req, res) => {\n  res.json({ status: 'ok', timestamp: new Date().toISOString() });\n});\n\n// Error handling\napp.use(errorHandler);\n\napp.listen(config.port, () => {\n  console.log(\\`Server running on port \\${config.port}\\`);\n});`,\n  },\n  \"tasks.ts\": {\n    name: \"tasks.ts\",\n    language: \"ts\",\n    code: `import { Router } from 'express';\nimport { TaskService } from '../services/taskService';\nimport { validateTask } from '../middleware/validation';\n\nconst router = Router();\nconst taskService = new TaskService();\n\nrouter.get('/', async (req, res, next) => {\n  try {\n    const tasks = await taskService.getAll();\n    res.json(tasks);\n  } catch (error) {\n    next(error);\n  }\n});\n\nrouter.get('/:id', async (req, res, next) => {\n  try {\n    const task = await taskService.getById(req.params.id);\n    if (!task) {\n      return res.status(404).json({ error: 'Task not found' });\n    }\n    res.json(task);\n  } catch (error) {\n    next(error);\n  }\n});\n\nrouter.post('/', validateTask, async (req, res, next) => {\n  try {\n    const task = await taskService.create(req.body);\n    res.status(201).json(task);\n  } catch (error) {\n    next(error);\n  }\n});\n\nrouter.put('/:id', validateTask, async (req, res, next) => {\n  try {\n    const task = await taskService.update(req.params.id, req.body);\n    res.json(task);\n  } catch (error) {\n    next(error);\n  }\n});\n\nrouter.delete('/:id', async (req, res, next) => {\n  try {\n    await taskService.delete(req.params.id);\n    res.status(204).send();\n  } catch (error) {\n    next(error);\n  }\n});\n\nexport { router as taskRouter };`,\n  },\n  \"users.ts\": {\n    name: \"users.ts\",\n    language: \"ts\",\n    code: `import { Router } from 'express';\nimport { UserService } from '../services/userService';\nimport { validateUser } from '../middleware/validation';\n\nconst router = Router();\nconst userService = new UserService();\n\nrouter.get('/', async (req, res, next) => {\n  try {\n    const users = await userService.getAll();\n    res.json(users);\n  } catch (error) {\n    next(error);\n  }\n});\n\nrouter.get('/:id', async (req, res, next) => {\n  try {\n    const user = await userService.getById(req.params.id);\n    if (!user) {\n      return res.status(404).json({ error: 'User not found' });\n    }\n    res.json(user);\n  } catch (error) {\n    next(error);\n  }\n});\n\nrouter.post('/', validateUser, async (req, res, next) => {\n  try {\n    const user = await userService.create(req.body);\n    res.status(201).json(user);\n  } catch (error) {\n    next(error);\n  }\n});\n\nexport { router as userRouter };`,\n  },\n  \"taskService.ts\": {\n    name: \"Updated taskService.ts\",\n    language: \"ts\",\n    code: `import { db } from '../db';\nimport type { Task, CreateTaskInput, UpdateTaskInput } from '../types';\n\nexport class TaskService {\n  async getAll(): Promise<Task[]> {\n    return db.tasks.findMany({\n      orderBy: { createdAt: 'desc' },\n    });\n  }\n\n  async getById(id: string): Promise<Task | null> {\n    return db.tasks.findUnique({\n      where: { id },\n    });\n  }\n\n  async create(data: CreateTaskInput): Promise<Task> {\n    return db.tasks.create({\n      data: {\n        ...data,\n        status: 'pending',\n        createdAt: new Date(),\n      },\n    });\n  }\n\n  async update(id: string, data: UpdateTaskInput): Promise<Task> {\n    return db.tasks.update({\n      where: { id },\n      data: {\n        ...data,\n        updatedAt: new Date(),\n      },\n    });\n  }\n\n  async delete(id: string): Promise<void> {\n    await db.tasks.delete({\n      where: { id },\n    });\n  }\n}`,\n  },\n  \"userService.ts\": {\n    name: \"Updated userService.ts\",\n    language: \"ts\",\n    code: `import { db } from '../db';\nimport { hashPassword } from '../utils/crypto';\nimport type { User, CreateUserInput } from '../types';\n\nexport class UserService {\n  async getAll(): Promise<User[]> {\n    return db.users.findMany({\n      select: {\n        id: true,\n        email: true,\n        name: true,\n        createdAt: true,\n      },\n    });\n  }\n\n  async getById(id: string): Promise<User | null> {\n    return db.users.findUnique({\n      where: { id },\n      select: {\n        id: true,\n        email: true,\n        name: true,\n        createdAt: true,\n      },\n    });\n  }\n\n  async create(data: CreateUserInput): Promise<User> {\n    const hashedPassword = await hashPassword(data.password);\n    \n    return db.users.create({\n      data: {\n        ...data,\n        password: hashedPassword,\n        createdAt: new Date(),\n      },\n      select: {\n        id: true,\n        email: true,\n        name: true,\n        createdAt: true,\n      },\n    });\n  }\n}`,\n  },\n  \"errorHandler.ts\": {\n    name: \"Updated errorHandler.ts\",\n    language: \"ts\",\n    code: `import type { Request, Response, NextFunction } from 'express';\n\nexport class AppError extends Error {\n  constructor(\n    public statusCode: number,\n    public message: string,\n    public isOperational = true\n  ) {\n    super(message);\n    Object.setPrototypeOf(this, AppError.prototype);\n  }\n}\n\nexport const errorHandler = (\n  err: Error | AppError,\n  req: Request,\n  res: Response,\n  next: NextFunction\n) => {\n  if (err instanceof AppError) {\n    return res.status(err.statusCode).json({\n      status: 'error',\n      message: err.message,\n    });\n  }\n\n  console.error('Unexpected error:', err);\n  \n  res.status(500).json({\n    status: 'error',\n    message: 'Internal server error',\n  });\n};`,\n  },\n  \"logger.ts\": {\n    name: \"logger.ts\",\n    language: \"ts\",\n    code: `import type { Request, Response, NextFunction } from 'express';\n\nexport const logger = (req: Request, res: Response, next: NextFunction) => {\n  const start = Date.now();\n  \n  res.on('finish', () => {\n    const duration = Date.now() - start;\n    const log = {\n      method: req.method,\n      url: req.url,\n      status: res.statusCode,\n      duration: \\`\\${duration}ms\\`,\n      timestamp: new Date().toISOString(),\n    };\n    \n    console.log(JSON.stringify(log));\n  });\n  \n  next();\n};`,\n  },\n  \"validation.ts\": {\n    name: \"validation.ts\",\n    language: \"ts\",\n    code: `import type { Request, Response, NextFunction } from 'express';\nimport { AppError } from './errorHandler';\n\nexport const validateTask = (\n  req: Request,\n  res: Response,\n  next: NextFunction\n) => {\n  const { title, description } = req.body;\n\n  if (!title || typeof title !== 'string') {\n    throw new AppError(400, 'Title is required and must be a string');\n  }\n\n  if (title.length < 3 || title.length > 100) {\n    throw new AppError(400, 'Title must be between 3 and 100 characters');\n  }\n\n  if (description && typeof description !== 'string') {\n    throw new AppError(400, 'Description must be a string');\n  }\n\n  next();\n};\n\nexport const validateUser = (\n  req: Request,\n  res: Response,\n  next: NextFunction\n) => {\n  const { email, password, name } = req.body;\n\n  if (!email || !email.includes('@')) {\n    throw new AppError(400, 'Valid email is required');\n  }\n\n  if (!password || password.length < 8) {\n    throw new AppError(400, 'Password must be at least 8 characters');\n  }\n\n  if (!name || typeof name !== 'string') {\n    throw new AppError(400, 'Name is required');\n  }\n\n  next();\n};`,\n  },\n  \"types.ts\": {\n    name: \"types.ts\",\n    language: \"ts\",\n    code: `export type TaskStatus = 'pending' | 'in_progress' | 'completed';\n\nexport interface Task {\n  id: string;\n  title: string;\n  description?: string;\n  status: TaskStatus;\n  createdAt: Date;\n  updatedAt?: Date;\n}\n\nexport interface CreateTaskInput {\n  title: string;\n  description?: string;\n}\n\nexport interface UpdateTaskInput {\n  title?: string;\n  description?: string;\n  status?: TaskStatus;\n}\n\nexport interface User {\n  id: string;\n  email: string;\n  name: string;\n  createdAt: Date;\n}\n\nexport interface CreateUserInput {\n  email: string;\n  password: string;\n  name: string;\n}`,\n  },\n  \"config.ts\": {\n    name: \"config.ts\",\n    language: \"ts\",\n    code: `export const config = {\n  port: process.env.PORT || 3000,\n  nodeEnv: process.env.NODE_ENV || 'development',\n  database: {\n    url: process.env.DATABASE_URL || 'postgresql://localhost:5432/taskdb',\n  },\n  jwt: {\n    secret: process.env.JWT_SECRET || 'your-secret-key',\n    expiresIn: '7d',\n  },\n} as const;`,\n  },\n  \"package.json\": {\n    name: \"package.json\",\n    language: \"json\",\n    code: `{\n  \"name\": \"task-api\",\n  \"version\": \"1.0.0\",\n  \"description\": \"RESTful API for task management\",\n  \"main\": \"dist/server.js\",\n  \"scripts\": {\n    \"dev\": \"tsx watch src/server.ts\",\n    \"build\": \"tsc\",\n    \"start\": \"node dist/server.js\",\n    \"test\": \"jest\"\n  },\n  \"dependencies\": {\n    \"express\": \"^4.18.2\",\n    \"prisma\": \"^5.7.0\",\n    \"@prisma/client\": \"^5.7.0\",\n    \"bcrypt\": \"^5.1.1\",\n    \"jsonwebtoken\": \"^9.0.2\",\n    \"zod\": \"^3.22.4\"\n  },\n  \"devDependencies\": {\n    \"@types/express\": \"^4.17.21\",\n    \"@types/node\": \"^20.10.5\",\n    \"@types/bcrypt\": \"^5.0.2\",\n    \"tsx\": \"^4.7.0\",\n    \"typescript\": \"^5.3.3\"\n  }\n}`,\n  },\n  \"README.md\": {\n    name: \"Updated README.md\",\n    language: \"mdx\",\n    code: `# Task Management API\n\nA RESTful API built with Express and TypeScript for managing tasks and users.\n\n## Features\n\n- ðŸ“ Full CRUD operations for tasks\n- ðŸ‘¥ User management\n- âœ… Input validation\n- ðŸ”’ Error handling\n- ðŸ“Š Request logging\n- ðŸ—„ï¸ PostgreSQL database with Prisma\n\n## Getting Started\n\n### Prerequisites\n\n- Node.js 18+\n- PostgreSQL\n\n### Installation\n\n\\`\\`\\`bash\nnpm install\n\\`\\`\\`\n\n### Environment Variables\n\nCreate a \\`.env\\` file:\n\n\\`\\`\\`env\nPORT=3000\nDATABASE_URL=postgresql://localhost:5432/taskdb\nJWT_SECRET=your-secret-key\n\\`\\`\\`\n\n### Database Setup\n\n\\`\\`\\`bash\nnpx prisma migrate dev\n\\`\\`\\`\n\n### Run\n\n\\`\\`\\`bash\nnpm run dev\n\\`\\`\\`\n\n## API Endpoints\n\n### Tasks\n\n- \\`GET /api/tasks\\` - Get all tasks\n- \\`GET /api/tasks/:id\\` - Get task by ID\n- \\`POST /api/tasks\\` - Create task\n- \\`PUT /api/tasks/:id\\` - Update task\n- \\`DELETE /api/tasks/:id\\` - Delete task\n\n### Users\n\n- \\`GET /api/users\\` - Get all users\n- \\`GET /api/users/:id\\` - Get user by ID\n- \\`POST /api/users\\` - Create user\n\n## Project Structure\n\n\\`\\`\\`\nsrc/\nâ”œâ”€â”€ routes/          # API routes\nâ”œâ”€â”€ services/        # Business logic\nâ”œâ”€â”€ middleware/      # Express middleware\nâ”œâ”€â”€ types.ts         # TypeScript types\nâ”œâ”€â”€ config.ts        # Configuration\nâ””â”€â”€ server.ts        # Entry point\n\\`\\`\\``,\n  },\n}\n\nexport default function CodebaseExample() {\n  const [selectedFile, setSelectedFile] = useState<string>(\"server.ts\")\n  const fallbackFile = fileContents[\"server.ts\"]\n\n  if (!fallbackFile) {\n    return null\n  }\n\n  const activeFile = fileContents[selectedFile] ?? fallbackFile\n\n  const handleFileSelect = (fileId: string) => {\n    if (fileContents[fileId]) {\n      setSelectedFile(fileId)\n    }\n  }\n\n  return (\n    <div className=\"grid size-full grid-cols-[300px_1fr] divide-x overflow-hidden\">\n      {/* File Explorer */}\n      <div className=\"size-full overflow-y-auto\">\n        <TreeProvider\n          defaultExpandedIds={[\"src\", \"routes\", \"services\", \"middleware\"]}\n          onSelectionChange={(ids) => {\n            const firstId = ids[0]\n            if (firstId) {\n              handleFileSelect(firstId)\n            }\n          }}\n          selectedIds={[selectedFile]}\n        >\n          <TreeView>\n            <TreeNode nodeId=\"src\">\n              <TreeNodeTrigger>\n                <TreeExpander hasChildren />\n                <TreeIcon hasChildren />\n                <TreeLabel>src</TreeLabel>\n              </TreeNodeTrigger>\n              <TreeNodeContent hasChildren>\n                <TreeNode level={1} nodeId=\"routes\">\n                  <TreeNodeTrigger>\n                    <TreeExpander hasChildren />\n                    <TreeIcon hasChildren />\n                    <TreeLabel>routes</TreeLabel>\n                  </TreeNodeTrigger>\n                  <TreeNodeContent hasChildren>\n                    <TreeNode level={2} nodeId=\"tasks.ts\">\n                      <TreeNodeTrigger>\n                        <TreeExpander />\n                        <TreeIcon icon={<FileType className=\"h-4 w-4\" />} />\n                        <TreeLabel>tasks.ts</TreeLabel>\n                      </TreeNodeTrigger>\n                    </TreeNode>\n                    <TreeNode isLast level={2} nodeId=\"users.ts\">\n                      <TreeNodeTrigger>\n                        <TreeExpander />\n                        <TreeIcon icon={<FileType className=\"h-4 w-4\" />} />\n                        <TreeLabel>users.ts</TreeLabel>\n                      </TreeNodeTrigger>\n                    </TreeNode>\n                  </TreeNodeContent>\n                </TreeNode>\n                <TreeNode level={1} nodeId=\"services\">\n                  <TreeNodeTrigger>\n                    <TreeExpander hasChildren />\n                    <TreeIcon hasChildren />\n                    <TreeLabel>services</TreeLabel>\n                  </TreeNodeTrigger>\n                  <TreeNodeContent hasChildren>\n                    <TreeNode level={2} nodeId=\"taskService.ts\">\n                      <TreeNodeTrigger>\n                        <TreeExpander />\n                        <TreeIcon icon={<FileType className=\"h-4 w-4\" />} />\n                        <TreeLabel>Updated taskService.ts</TreeLabel>\n                      </TreeNodeTrigger>\n                    </TreeNode>\n                    <TreeNode isLast level={2} nodeId=\"userService.ts\">\n                      <TreeNodeTrigger>\n                        <TreeExpander />\n                        <TreeIcon icon={<FileType className=\"h-4 w-4\" />} />\n                        <TreeLabel>Updated userService.ts</TreeLabel>\n                      </TreeNodeTrigger>\n                    </TreeNode>\n                  </TreeNodeContent>\n                </TreeNode>\n                <TreeNode level={1} nodeId=\"middleware\">\n                  <TreeNodeTrigger>\n                    <TreeExpander hasChildren />\n                    <TreeIcon hasChildren />\n                    <TreeLabel>middleware</TreeLabel>\n                  </TreeNodeTrigger>\n                  <TreeNodeContent hasChildren>\n                    <TreeNode level={2} nodeId=\"errorHandler.ts\">\n                      <TreeNodeTrigger>\n                        <TreeExpander />\n                        <TreeIcon icon={<FileType className=\"h-4 w-4\" />} />\n                        <TreeLabel>Updated errorHandler.ts</TreeLabel>\n                      </TreeNodeTrigger>\n                    </TreeNode>\n                    <TreeNode level={2} nodeId=\"logger.ts\">\n                      <TreeNodeTrigger>\n                        <TreeExpander />\n                        <TreeIcon icon={<FileType className=\"h-4 w-4\" />} />\n                        <TreeLabel>logger.ts</TreeLabel>\n                      </TreeNodeTrigger>\n                    </TreeNode>\n                    <TreeNode isLast level={2} nodeId=\"validation.ts\">\n                      <TreeNodeTrigger>\n                        <TreeExpander />\n                        <TreeIcon icon={<FileType className=\"h-4 w-4\" />} />\n                        <TreeLabel>validation.ts</TreeLabel>\n                      </TreeNodeTrigger>\n                    </TreeNode>\n                  </TreeNodeContent>\n                </TreeNode>\n                <TreeNode level={1} nodeId=\"types.ts\">\n                  <TreeNodeTrigger>\n                    <TreeExpander />\n                    <TreeIcon icon={<FileType className=\"h-4 w-4\" />} />\n                    <TreeLabel>types.ts</TreeLabel>\n                  </TreeNodeTrigger>\n                </TreeNode>\n                <TreeNode level={1} nodeId=\"config.ts\">\n                  <TreeNodeTrigger>\n                    <TreeExpander />\n                    <TreeIcon icon={<FileType className=\"h-4 w-4\" />} />\n                    <TreeLabel>config.ts</TreeLabel>\n                  </TreeNodeTrigger>\n                </TreeNode>\n                <TreeNode isLast level={1} nodeId=\"server.ts\">\n                  <TreeNodeTrigger>\n                    <TreeExpander />\n                    <TreeIcon icon={<FileType className=\"h-4 w-4\" />} />\n                    <TreeLabel>server.ts</TreeLabel>\n                  </TreeNodeTrigger>\n                </TreeNode>\n              </TreeNodeContent>\n            </TreeNode>\n            <TreeNode nodeId=\"package.json\">\n              <TreeNodeTrigger>\n                <TreeExpander />\n                <TreeIcon icon={<FileJson className=\"h-4 w-4\" />} />\n                <TreeLabel>package.json</TreeLabel>\n              </TreeNodeTrigger>\n            </TreeNode>\n            <TreeNode isLast nodeId=\"README.md\">\n              <TreeNodeTrigger>\n                <TreeExpander />\n                <TreeIcon icon={<FileText className=\"h-4 w-4\" />} />\n                <TreeLabel>Updated README.md</TreeLabel>\n              </TreeNodeTrigger>\n            </TreeNode>\n          </TreeView>\n        </TreeProvider>\n      </div>\n\n      {/* Code Viewer */}\n      <CodeBlock className=\"size-full overflow-y-auto rounded-none border-none\">\n        <CodeBlockHeader>\n          <CodeBlockGroup>\n            <CodeBlockIcon language={activeFile.language} />\n            <span>{activeFile.name}</span>\n          </CodeBlockGroup>\n          <CopyButton content={activeFile.code} />\n        </CodeBlockHeader>\n        <CodeBlockContent className=\"h-[calc(100%-2.25rem)] rounded-none\">\n          <CodeblockShiki\n            code={activeFile.code}\n            language={activeFile.language}\n            lineNumbers\n          />\n        </CodeBlockContent>\n      </CodeBlock>\n    </div>\n  )\n}\n",
      "type": "registry:example"
    }
  ],
  "categories": [
    "blocks",
    "codebase",
    "code"
  ],
  "type": "registry:example"
}