{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "gantt-lanes",
  "description": "Gantt chart using lanes to group reservations by room.",
  "registryDependencies": [
    "@loveui/gantt",
    "@faker-js/faker",
    "lodash.groupby"
  ],
  "files": [
    {
      "path": "registry/default/examples/gantt-lanes.tsx",
      "content": "\"use client\"\n\nimport { useState } from \"react\"\nimport { faker } from \"@faker-js/faker\"\n// @ts-ignore: No type declarations for 'lodash.groupby'\nimport groupBy from \"lodash.groupby\"\nimport { EyeIcon, LinkIcon, TrashIcon } from \"lucide-react\"\n\nimport {\n  Avatar,\n  AvatarFallback,\n  AvatarImage,\n} from \"@/registry/default/ui/avatar\"\nimport {\n  ContextMenu,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuTrigger,\n} from \"@/registry/default/ui/context-menu\"\n\nimport {\n  GanttCreateMarkerTrigger,\n  GanttFeatureList,\n  GanttFeatureListGroup,\n  GanttFeatureRow,\n  GanttHeader,\n  GanttMarker,\n  GanttProvider,\n  GanttSidebar,\n  GanttSidebarGroup,\n  GanttSidebarItem,\n  GanttTimeline,\n  GanttToday,\n} from \"../../../../../packages/gantt\"\n\n// Seed faker to ensure consistent data between server and client\nfaker.seed(123)\n\nconst capitalize = (str: string) => str.charAt(0).toUpperCase() + str.slice(1)\n\nconst statuses = [\n  { id: faker.string.uuid(), name: \"Updated Confirmed\", color: \"#10B981\" },\n  { id: faker.string.uuid(), name: \"Updated Pending\", color: \"#F59E0B\" },\n  { id: faker.string.uuid(), name: \"Updated Cancelled\", color: \"#EF4444\" },\n]\n\nconst guests = Array.from({ length: 8 })\n  .fill(null)\n  .map(() => ({\n    id: faker.string.uuid(),\n    name: faker.person.fullName(),\n    image: faker.image.avatar(),\n  }))\n\n// Hotel rooms\nconst hotelRooms = Array.from({ length: 5 })\n  .fill(null)\n  .map((_, index) => ({\n    id: faker.string.uuid(),\n    name: `Room ${101 + index}`,\n  }))\n\n// Generate hotel reservations - multiple guests can book the same room for different periods\nconst hotelReservations = Array.from({ length: 12 })\n  .fill(null)\n  .map(() => {\n    const startDate = faker.date.future({ years: 0.3, refDate: new Date() })\n    const endDate = faker.date.future({ years: 0.1, refDate: startDate })\n    const room = faker.helpers.arrayElement(hotelRooms)\n    const guest = faker.helpers.arrayElement(guests)\n\n    return {\n      id: faker.string.uuid(),\n      name: `${guest.name} - ${faker.helpers.arrayElement([\"Business Trip\", \"Vacation\", \"Conference\", \"Weekend Getaway\"])}`,\n      startAt: startDate,\n      endAt: endDate,\n      status: faker.helpers.arrayElement(statuses),\n      lane: room.id, // This groups reservations by room\n      // Store additional data that's not part of core GanttFeature\n      metadata: {\n        guest,\n        room,\n        group: { name: \"Updated Hotel Reservations\" },\n      },\n    }\n  })\n\nconst exampleMarkers = Array.from({ length: 3 })\n  .fill(null)\n  .map(() => ({\n    id: faker.string.uuid(),\n    date: faker.date.future({ years: 0.2, refDate: new Date() }),\n    label: faker.helpers.arrayElement([\n      \"Holiday Period\",\n      \"Conference Week\",\n      \"Peak Season\",\n    ]),\n    className: faker.helpers.arrayElement([\n      \"bg-blue-100 text-blue-900\",\n      \"bg-green-100 text-green-900\",\n      \"bg-purple-100 text-purple-900\",\n    ]),\n  }))\n\nconst Example = () => {\n  const [reservations, setReservations] = useState(hotelReservations)\n\n  // Group reservations by room (lane), then by group\n  const groupedReservations = groupBy(reservations, \"metadata.group.name\")\n  const roomGroupedReservations = Object.fromEntries(\n    Object.entries(groupedReservations).map(\n      ([groupName, groupReservations]) => [\n        groupName,\n        groupBy(groupReservations, \"lane\"),\n      ]\n    )\n  )\n\n  const handleViewReservation = (id: string) =>\n    console.log(`Reservation selected: ${id}`)\n\n  const handleCopyLink = (id: string) => console.log(`Copy link: ${id}`)\n\n  const handleRemoveReservation = (id: string) =>\n    setReservations((prev) =>\n      prev.filter((reservation) => reservation.id !== id)\n    )\n\n  const handleRemoveMarker = (id: string) => console.log(`Remove marker: ${id}`)\n\n  const handleCreateMarker = (date: Date) =>\n    console.log(`Create marker: ${date.toISOString()}`)\n\n  const handleMoveReservation = (\n    id: string,\n    startAt: Date,\n    endAt: Date | null\n  ) => {\n    if (!endAt) {\n      return\n    }\n\n    setReservations((prev) =>\n      prev.map((reservation) =>\n        reservation.id === id ? { ...reservation, startAt, endAt } : reservation\n      )\n    )\n\n    console.log(`Move reservation: ${id} from ${startAt} to ${endAt}`)\n  }\n\n  const handleAddReservation = (date: Date) =>\n    console.log(`Add reservation: ${date.toISOString()}`)\n\n  return (\n    <GanttProvider\n      className=\"border\"\n      onAddItem={handleAddReservation}\n      range=\"monthly\"\n      zoom={100}\n    >\n      <GanttSidebar>\n        {Object.entries(roomGroupedReservations).map(\n          ([groupName, roomReservations]) => (\n            <GanttSidebarGroup key={groupName} name={groupName}>\n              {Object.entries(roomReservations).map(\n                ([roomId, roomReservationList]) => {\n                  const room = hotelRooms.find((r) => r.id === roomId)\n                  // Create a representative feature for the sidebar\n                  const representativeReservation = {\n                    id: roomId,\n                    name: room?.name || \"Unknown Room\",\n                    startAt: new Date(\n                      Math.min(\n                        ...roomReservationList.map((r) => r.startAt.getTime())\n                      )\n                    ),\n                    endAt: new Date(\n                      Math.max(\n                        ...roomReservationList.map((r) => r.endAt.getTime())\n                      )\n                    ),\n                    status: roomReservationList[0].status,\n                  }\n\n                  return (\n                    <GanttSidebarItem\n                      feature={representativeReservation}\n                      key={roomId}\n                      onSelectItem={() => handleViewReservation(roomId)}\n                    />\n                  )\n                }\n              )}\n            </GanttSidebarGroup>\n          )\n        )}\n      </GanttSidebar>\n      <GanttTimeline>\n        <GanttHeader />\n        <GanttFeatureList>\n          {Object.entries(roomGroupedReservations).map(\n            ([groupName, roomReservations]) => (\n              <GanttFeatureListGroup key={groupName}>\n                {Object.entries(roomReservations).map(\n                  ([roomId, roomReservationList]) => (\n                    <div key={roomId}>\n                      <GanttFeatureRow\n                        features={roomReservationList}\n                        onMove={handleMoveReservation}\n                      >\n                        {(reservation) => (\n                          <ContextMenu>\n                            <ContextMenuTrigger asChild>\n                              <div className=\"flex w-full items-center gap-2\">\n                                <p className=\"flex-1 truncate text-xs\">\n                                  {reservation.name}\n                                </p>\n                                {(reservation as any).metadata?.guest && (\n                                  <Avatar className=\"h-4 w-4\">\n                                    <AvatarImage\n                                      src={\n                                        (reservation as any).metadata.guest\n                                          .image\n                                      }\n                                    />\n                                    <AvatarFallback>\n                                      {(\n                                        reservation as any\n                                      ).metadata.guest.name?.slice(0, 2)}\n                                    </AvatarFallback>\n                                  </Avatar>\n                                )}\n                              </div>\n                            </ContextMenuTrigger>\n                            <ContextMenuContent>\n                              <ContextMenuItem\n                                className=\"flex items-center gap-2\"\n                                onClick={() =>\n                                  handleViewReservation(reservation.id)\n                                }\n                              >\n                                <EyeIcon\n                                  className=\"text-muted-foreground\"\n                                  size={16}\n                                />\n                                Updated View reservation\n                              </ContextMenuItem>\n                              <ContextMenuItem\n                                className=\"flex items-center gap-2\"\n                                onClick={() => handleCopyLink(reservation.id)}\n                              >\n                                <LinkIcon\n                                  className=\"text-muted-foreground\"\n                                  size={16}\n                                />\n                                Updated Copy link\n                              </ContextMenuItem>\n                              <ContextMenuItem\n                                className=\"flex items-center gap-2 text-destructive\"\n                                onClick={() =>\n                                  handleRemoveReservation(reservation.id)\n                                }\n                              >\n                                <TrashIcon size={16} />\n                                Updated Cancel reservation\n                              </ContextMenuItem>\n                            </ContextMenuContent>\n                          </ContextMenu>\n                        )}\n                      </GanttFeatureRow>\n                    </div>\n                  )\n                )}\n              </GanttFeatureListGroup>\n            )\n          )}\n        </GanttFeatureList>\n        {exampleMarkers.map((marker) => (\n          <GanttMarker\n            key={marker.id}\n            {...marker}\n            onRemove={handleRemoveMarker}\n          />\n        ))}\n        <GanttToday />\n        <GanttCreateMarkerTrigger onCreateMarker={handleCreateMarker} />\n      </GanttTimeline>\n    </GanttProvider>\n  )\n}\n\nexport default Example\n",
      "type": "registry:example"
    }
  ],
  "categories": [
    "gantt",
    "project management",
    "lanes"
  ],
  "type": "registry:example"
}